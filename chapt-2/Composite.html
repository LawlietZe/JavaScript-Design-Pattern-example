<!DOCTYPE html>
<html>
<head>
	<title>Composite Pattern Test Page</title>
<meta charset="utf-8">	
</head>
<body>
<script type="text/javascript">
							function object(o) {
              function F() {}
              F.prototype = o;
              return new F();
              }
							function inheritPrototype(subType,superType){  
							  
							var prototype = object(superType.prototype);//åˆ›å»ºå¯¹è±¡  
							  
							prototype.constructor = subType;//å¢å¼ºå¯¹è±¡  
							  
							subType.prototype = prototype;//è‡ªå®šå¯¹è±¡  
							  
							}


		//					
	var News = function(){
		this.children = [];

		this.element = null;
	}	
	News.prototype = {
		init :function(){
			throw new Error("é‡å†™æ–¹æ³•");
		},
		add  :function(){
			throw new Error("é‡å†™æ–¹æ³•");
		},
		getElement :function(){
						throw new Error("é‡å†™æ–¹æ³•");
		}

	}					  
    //å®¹å™¨ç±»æ„é€ å‡½æ•°
	var Container = function(id,parent){
    //æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»
		News.call(this);
    //æ¨¡å—id
		this.id = id;
    //æ¨¡å—çˆ¶å®¹å™¨
		this.parent = parent;
    //æ„å»ºæ–¹æ³•
		this.init();
	}
	//å¯„ç”Ÿå¼å³æˆçˆ¶ç±»åŸå‹æ–¹æ³•
	inheritPrototype(Container,News);
	//æ„å»ºæ–¹æ³•
	Container.prototype.init = function(){
		this.element = document.createElement('ul');
		this.element.id = this.id;
		this.element.className = 'new-container';
	};
	//æ·»åŠ å­å…ƒç´ æ–¹æ³•
	Container.prototype.add = function(child){
		//åœ¨å­å…ƒç´ å®¹å™¨ä¸­æ’å…¥å­å…ƒç´ 
		this.children.push(child);
		//æ’å…¥å½“å‰ç»„å»ºå…ƒç´ æ ‘ä¸­
		this.element.appendChild(child.getElement());
		return this;
	}
	//è·å–å½“å‰å…ƒç´ æ–¹æ³•
	Container.prototype.getElement = function(){
		return this.element;
	}
	//æ˜¾ç¤ºæ–¹æ³•
	Container.prototype.show = function(){
		this.parent.appendChild(this.element);
	}

	var Item = function(classname){
		News.call(this);
		this.classname = classname || '';
		this.init();
	}
	inheritPrototype(Item,News);
	Item.prototype.init = function(){
		this.element = document.createElement('li');
		this.element.className = this.classname;
	}
	Item.prototype.add = function(child){
		//åœ¨å­å…ƒç´ å®¹å™¨ä¸­æ’å…¥å­å…ƒç´ 
		this.children.push(child);
		//æ’å…¥å½“å‰ç»„å»ºå…ƒç´ æ ‘ä¸­
		this.element.appendChild(child.getElement());
		return this;
	}
	//è·å–å½“å‰å…ƒç´ æ–¹æ³•
	Item.prototype.getElement = function(){
		return this.element;
	}

	var NewsGroup = function(classname){
		News.call(this);
		this.classname = classname || '';
		this.init();
	}	
  
  inheritPrototype(NewsGroup,News);

	NewsGroup.prototype.init = function(){
		this.element = document.createElement('div');
		this.element.className = this.classname;
	}
	Item.prototype.add = function(child){
		//åœ¨å­å…ƒç´ å®¹å™¨ä¸­æ’å…¥å­å…ƒç´ 
		this.children.push(child);
		//æ’å…¥å½“å‰ç»„å»ºå…ƒç´ æ ‘ä¸­
		this.element.appendChild(child.getElement());
		return this;
	}
	//è·å–å½“å‰å…ƒç´ æ–¹æ³•
	NewsGroup.prototype.getElement = function(){
		return this.element;
	}
  
  var ImageNews = function(url,href,classname){
  	News.call(this);
  	this.url = url ||'';
  	this.href = href || '#';
  	this.classname = classname || 'normal';
  	this.init();
  } 
  inheritPrototype(ImageNews,News);
  ImageNews.prototype.init = function(){
  	this.element = document.createElement('a');
  	var img = new Image();
  	img.src = this.url;
  	this.element.appendChild(img);
  	this.element.className = 'image-news'+this.classname;
  	this.element.href = this.href;
  }
  ImageNews.prototype.add = function(){}
  ImageNews.prototype.getElement = function(){
  	return this.element;
  }

  //ğŸ“
    var IconNews = function(text,href,type){
  	News.call(this);
  	this.text = text ||'';
  	this.href = href || '#';
  	this.type = type || 'video';
  	this.init();
  } 
  inheritPrototype(IconNews,News);
  IconNews.prototype.init = function(){
  	this.element = document.createElement('a');
  	this.element.innerHTML =this.text;
  	this.element.href = this.href;
  	this.element.className = 'icon' + this.type;
  }
  IconNews.prototype.add = function(){}
  IconNews.prototype.getElement = function(){
  	return this.element;
  }


  var EasyNews = function(text,href){
	News.call(this);
	this.text = text ||'';
	this.href = href || '#';
	this.init();
  }  
  inheritPrototype(EasyNews,News);
  EasyNews.prototype.init = function(){
  	this.element = document.createElement('a');
  	this.element.innerHTML =this.text;
  	this.element.href = this.href;
  	this.element.className = 'text';
  }
  IconNews.prototype.add = function(){}
  IconNews.prototype.getElement = function(){
  	return this.element;
  }
  var TypeNews = function(text,href,type,pos){
	News.call(this);
	this.text = text || '';
	this.href = href || '#';
	this.type = type || '';
	this.pos  = pos  || 'left'; 
	this.init();
  }  
  inheritPrototype(TypeNews,News);
  EasyNews.prototype.init = function(){
  	this.element = document.createElement('a');
  	if(this.pos === 'left'){
  		this.element.innerHTML = '[' + this.type +']'+this.text;
  	}else{
  		this.element.innerHTML = this.text + '[ '+this.type+']';
  	}
  	this.element.href = this.href;
  	this.element.className = 'text';
  }
  TypeNews.prototype.add = function(){}
  TypeNews.prototype.getElement = function(){
  	return this.element;
  }
  var news1  = new Container('news',document.body);
  news1.add(
  	new Item('normal').add(
  		new IconNews('æ¢…è¥¿å°±æ˜¯ä¸ªå¤§ç¬¨è›‹','#','video')
  		)
     ).add(
    new Item('normal').add(
    	new IconNews('ä¿æŠ¤å›½å®¶äººäººæœ‰è´£','#','live')
    	) 
     ).add(
     new Item('normal').add(
     	new TypeNews('AK47å°±æ˜¯ç«åŠ›çŒ›!','#','NBA','left')
     	)
     ).add(
 		 new Item('normal').add(
 		 	new TypeNews('rpgå¤§å–ï¼ï¼ï¼','#','CBA','right')
 		 	)
     ).show();	  
</script>
</body>
</html>